{"ast":null,"code":"import _objectSpread from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { UIPlugin } from '@uppy/core';\nimport { h } from 'preact';\nimport Editor from \"./Editor.js\";\nvar packageJson = {\n  \"version\": \"2.1.0\"\n};\nimport locale from './locale.js';\nvar ImageEditor = /*#__PURE__*/function (_UIPlugin) {\n  _inherits(ImageEditor, _UIPlugin);\n  var _super = _createSuper(ImageEditor);\n  function ImageEditor(uppy, opts) {\n    var _this;\n    _classCallCheck(this, ImageEditor);\n    _this = _super.call(this, uppy, opts);\n    _this.save = function () {\n      var saveBlobCallback = function saveBlobCallback(blob) {\n        var _this$getPluginState = _this.getPluginState(),\n          currentImage = _this$getPluginState.currentImage;\n        _this.uppy.setFileState(currentImage.id, {\n          data: blob,\n          size: blob.size,\n          preview: null\n        });\n        var updatedFile = _this.uppy.getFile(currentImage.id);\n        _this.uppy.emit('thumbnail:request', updatedFile);\n        _this.setPluginState({\n          currentImage: updatedFile\n        });\n        _this.uppy.emit('file-editor:complete', updatedFile);\n      };\n      var _this$getPluginState2 = _this.getPluginState(),\n        currentImage = _this$getPluginState2.currentImage;\n      _this.cropper.getCroppedCanvas(_this.opts.cropperOptions.croppedCanvasOptions).toBlob(saveBlobCallback, currentImage.type, _this.opts.quality);\n    };\n    _this.storeCropperInstance = function (cropper) {\n      _this.cropper = cropper;\n    };\n    _this.selectFile = function (file) {\n      _this.uppy.emit('file-editor:start', file);\n      _this.setPluginState({\n        currentImage: file\n      });\n    };\n    _this.id = _this.opts.id || 'ImageEditor';\n    _this.title = 'Image Editor';\n    _this.type = 'editor';\n    _this.defaultLocale = locale;\n    var defaultCropperOptions = {\n      viewMode: 1,\n      background: false,\n      autoCropArea: 1,\n      responsive: true,\n      croppedCanvasOptions: {}\n    };\n    var defaultActions = {\n      revert: true,\n      rotate: true,\n      granularRotate: true,\n      flip: true,\n      zoomIn: true,\n      zoomOut: true,\n      cropSquare: true,\n      cropWidescreen: true,\n      cropWidescreenVertical: true\n    };\n    var defaultOptions = {\n      quality: 0.8\n    };\n    _this.opts = _objectSpread(_objectSpread(_objectSpread({}, defaultOptions), opts), {}, {\n      actions: _objectSpread(_objectSpread({}, defaultActions), opts.actions),\n      cropperOptions: _objectSpread(_objectSpread({}, defaultCropperOptions), opts.cropperOptions)\n    });\n    _this.i18nInit();\n    return _this;\n  } // eslint-disable-next-line class-methods-use-this\n  _createClass(ImageEditor, [{\n    key: \"canEditFile\",\n    value: function canEditFile(file) {\n      if (!file.type || file.isRemote) {\n        return false;\n      }\n      var fileTypeSpecific = file.type.split('/')[1];\n      if (/^(jpe?g|gif|png|bmp|webp)$/.test(fileTypeSpecific)) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"install\",\n    value: function install() {\n      this.setPluginState({\n        currentImage: null\n      });\n      var target = this.opts.target;\n      if (target) {\n        this.mount(target, this);\n      }\n    }\n  }, {\n    key: \"uninstall\",\n    value: function uninstall() {\n      var _this$getPluginState3 = this.getPluginState(),\n        currentImage = _this$getPluginState3.currentImage;\n      if (currentImage) {\n        var file = this.uppy.getFile(currentImage.id);\n        this.uppy.emit('file-editor:cancel', file);\n      }\n      this.unmount();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$getPluginState4 = this.getPluginState(),\n        currentImage = _this$getPluginState4.currentImage;\n      if (currentImage === null || currentImage.isRemote) {\n        return null;\n      }\n      return h(Editor, {\n        currentImage: currentImage,\n        storeCropperInstance: this.storeCropperInstance,\n        save: this.save,\n        opts: this.opts,\n        i18n: this.i18n\n      });\n    }\n  }]);\n  return ImageEditor;\n}(UIPlugin);\nexport { ImageEditor as default };\nImageEditor.VERSION = packageJson.version;","map":{"version":3,"names":["UIPlugin","h","Editor","packageJson","locale","ImageEditor","_UIPlugin","_inherits","_super","_createSuper","uppy","opts","_this","_classCallCheck","call","save","saveBlobCallback","blob","_this$getPluginState","getPluginState","currentImage","setFileState","id","data","size","preview","updatedFile","getFile","emit","setPluginState","_this$getPluginState2","cropper","getCroppedCanvas","cropperOptions","croppedCanvasOptions","toBlob","type","quality","storeCropperInstance","selectFile","file","title","defaultLocale","defaultCropperOptions","viewMode","background","autoCropArea","responsive","defaultActions","revert","rotate","granularRotate","flip","zoomIn","zoomOut","cropSquare","cropWidescreen","cropWidescreenVertical","defaultOptions","_objectSpread","actions","i18nInit","_createClass","key","value","canEditFile","isRemote","fileTypeSpecific","split","test","install","target","mount","uninstall","_this$getPluginState3","unmount","render","_this$getPluginState4","i18n","default","VERSION","version"],"sources":["E:/integrate cloud/uppy/node_modules/@uppy/image-editor/lib/ImageEditor.js"],"sourcesContent":["import { UIPlugin } from '@uppy/core';\nimport { h } from 'preact';\nimport Editor from \"./Editor.js\";\nconst packageJson = {\n  \"version\": \"2.1.0\"\n};\nimport locale from './locale.js';\nexport default class ImageEditor extends UIPlugin {\n  constructor(uppy, opts) {\n    super(uppy, opts);\n\n    this.save = () => {\n      const saveBlobCallback = blob => {\n        const {\n          currentImage\n        } = this.getPluginState();\n        this.uppy.setFileState(currentImage.id, {\n          data: blob,\n          size: blob.size,\n          preview: null\n        });\n        const updatedFile = this.uppy.getFile(currentImage.id);\n        this.uppy.emit('thumbnail:request', updatedFile);\n        this.setPluginState({\n          currentImage: updatedFile\n        });\n        this.uppy.emit('file-editor:complete', updatedFile);\n      };\n\n      const {\n        currentImage\n      } = this.getPluginState();\n      this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(saveBlobCallback, currentImage.type, this.opts.quality);\n    };\n\n    this.storeCropperInstance = cropper => {\n      this.cropper = cropper;\n    };\n\n    this.selectFile = file => {\n      this.uppy.emit('file-editor:start', file);\n      this.setPluginState({\n        currentImage: file\n      });\n    };\n\n    this.id = this.opts.id || 'ImageEditor';\n    this.title = 'Image Editor';\n    this.type = 'editor';\n    this.defaultLocale = locale;\n    const defaultCropperOptions = {\n      viewMode: 1,\n      background: false,\n      autoCropArea: 1,\n      responsive: true,\n      croppedCanvasOptions: {}\n    };\n    const defaultActions = {\n      revert: true,\n      rotate: true,\n      granularRotate: true,\n      flip: true,\n      zoomIn: true,\n      zoomOut: true,\n      cropSquare: true,\n      cropWidescreen: true,\n      cropWidescreenVertical: true\n    };\n    const defaultOptions = {\n      quality: 0.8\n    };\n    this.opts = { ...defaultOptions,\n      ...opts,\n      actions: { ...defaultActions,\n        ...opts.actions\n      },\n      cropperOptions: { ...defaultCropperOptions,\n        ...opts.cropperOptions\n      }\n    };\n    this.i18nInit();\n  } // eslint-disable-next-line class-methods-use-this\n\n\n  canEditFile(file) {\n    if (!file.type || file.isRemote) {\n      return false;\n    }\n\n    const fileTypeSpecific = file.type.split('/')[1];\n\n    if (/^(jpe?g|gif|png|bmp|webp)$/.test(fileTypeSpecific)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  install() {\n    this.setPluginState({\n      currentImage: null\n    });\n    const {\n      target\n    } = this.opts;\n\n    if (target) {\n      this.mount(target, this);\n    }\n  }\n\n  uninstall() {\n    const {\n      currentImage\n    } = this.getPluginState();\n\n    if (currentImage) {\n      const file = this.uppy.getFile(currentImage.id);\n      this.uppy.emit('file-editor:cancel', file);\n    }\n\n    this.unmount();\n  }\n\n  render() {\n    const {\n      currentImage\n    } = this.getPluginState();\n\n    if (currentImage === null || currentImage.isRemote) {\n      return null;\n    }\n\n    return h(Editor, {\n      currentImage: currentImage,\n      storeCropperInstance: this.storeCropperInstance,\n      save: this.save,\n      opts: this.opts,\n      i18n: this.i18n\n    });\n  }\n\n}\nImageEditor.VERSION = packageJson.version;"],"mappings":"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"},"metadata":{},"sourceType":"module"}