{"ast":null,"code":"'use strict';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nvar qsStringify = require('qs-stringify');\nvar URL = require('url-parse');\nvar RequestClient = require('./RequestClient');\nvar tokenStorage = require('./tokenStorage');\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(Provider, _RequestClient);\n  function Provider(uppy, opts) {\n    var _this;\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    _this.tokenKey = \"companion-\" + _this.pluginId + \"-auth-token\";\n    _this.companionKeysParams = _this.opts.companionKeysParams;\n    _this.preAuthToken = null;\n    return _this;\n  }\n  var _proto = Provider.prototype;\n  _proto.headers = function headers() {\n    var _this2 = this;\n    return Promise.all([_RequestClient.prototype.headers.call(this), this.getAuthToken()]).then(function (_ref) {\n      var headers = _ref[0],\n        token = _ref[1];\n      var authHeaders = {};\n      if (token) {\n        authHeaders['uppy-auth-token'] = token;\n      }\n      if (_this2.companionKeysParams) {\n        authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n          params: _this2.companionKeysParams\n        }));\n      }\n      return _extends({}, headers, authHeaders);\n    });\n  };\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    response = _RequestClient.prototype.onReceiveResponse.call(this, response);\n    var plugin = this.uppy.getPlugin(this.pluginId);\n    var oldAuthenticated = plugin.getPluginState().authenticated;\n    var authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated: authenticated\n    });\n    return response;\n  } // @todo(i.olarewaju) consider whether or not this method should be exposed\n  ;\n\n  _proto.setAuthToken = function setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  };\n  _proto.getAuthToken = function getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  };\n  _proto.authUrl = function authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n    if (this.preAuthToken) {\n      queries.uppyPreAuthToken = this.preAuthToken;\n    }\n    var strigifiedQueries = qsStringify(queries);\n    strigifiedQueries = strigifiedQueries ? \"?\" + strigifiedQueries : strigifiedQueries;\n    return this.hostname + \"/\" + this.id + \"/connect\" + strigifiedQueries;\n  };\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/\" + this.id + \"/get/\" + id;\n  };\n  _proto.fetchPreAuthToken = function fetchPreAuthToken() {\n    var _this3 = this;\n    if (!this.companionKeysParams) {\n      return Promise.resolve();\n    }\n    return this.post(this.id + \"/preauth/\", {\n      params: this.companionKeysParams\n    }).then(function (res) {\n      _this3.preAuthToken = res.token;\n    }).catch(function (err) {\n      _this3.uppy.log(\"[CompanionClient] unable to fetch preAuthToken \" + err, 'warning');\n    });\n  };\n  _proto.list = function list(directory) {\n    return this.get(this.id + \"/list/\" + (directory || ''));\n  };\n  _proto.logout = function logout() {\n    var _this4 = this;\n    return this.get(this.id + \"/logout\").then(function (response) {\n      return Promise.all([response, _this4.uppy.getPlugin(_this4.pluginId).storage.removeItem(_this4.tokenKey)]);\n    }).then(function (_ref2) {\n      var response = _ref2[0];\n      return response;\n    });\n  };\n  Provider.initPlugin = function initPlugin(plugin, opts, defaultOpts) {\n    plugin.type = 'acquirer';\n    plugin.files = [];\n    if (defaultOpts) {\n      plugin.opts = _extends({}, defaultOpts, opts);\n    }\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n    if (opts.companionAllowedHosts) {\n      var pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(plugin.id + \": the option \\\"companionAllowedHosts\\\" must be one of string, Array, RegExp\");\n      }\n      plugin.opts.companionAllowedHosts = pattern;\n    } else {\n      // does not start with https://\n      if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n        plugin.opts.companionAllowedHosts = \"https://\" + opts.companionUrl.replace(/^\\/\\//, '');\n      } else {\n        plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n      }\n    }\n    plugin.storage = plugin.opts.storage || tokenStorage;\n  };\n  return Provider;\n}(RequestClient);","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","qsStringify","require","URL","RequestClient","tokenStorage","_getName","id","split","map","s","charAt","toUpperCase","slice","join","module","exports","_RequestClient","Provider","uppy","opts","_this","provider","name","pluginId","tokenKey","companionKeysParams","preAuthToken","_proto","headers","_this2","Promise","all","getAuthToken","then","_ref","token","authHeaders","btoa","JSON","stringify","params","onReceiveResponse","response","plugin","getPlugin","oldAuthenticated","getPluginState","authenticated","status","setPluginState","setAuthToken","storage","setItem","getItem","authUrl","queries","uppyPreAuthToken","strigifiedQueries","hostname","fileUrl","fetchPreAuthToken","_this3","resolve","post","res","catch","err","log","list","directory","get","logout","_this4","removeItem","_ref2","initPlugin","defaultOpts","type","files","serverUrl","serverPattern","Error","companionAllowedHosts","pattern","Array","isArray","RegExp","TypeError","test","companionUrl","replace","origin"],"sources":["E:/integrate cloud/uppy/node_modules/@uppy/companion-client/lib/Provider.js"],"sourcesContent":["'use strict';\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar qsStringify = require('qs-stringify');\n\nvar URL = require('url-parse');\n\nvar RequestClient = require('./RequestClient');\n\nvar tokenStorage = require('./tokenStorage');\n\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\n\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(Provider, _RequestClient);\n\n  function Provider(uppy, opts) {\n    var _this;\n\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    _this.tokenKey = \"companion-\" + _this.pluginId + \"-auth-token\";\n    _this.companionKeysParams = _this.opts.companionKeysParams;\n    _this.preAuthToken = null;\n    return _this;\n  }\n\n  var _proto = Provider.prototype;\n\n  _proto.headers = function headers() {\n    var _this2 = this;\n\n    return Promise.all([_RequestClient.prototype.headers.call(this), this.getAuthToken()]).then(function (_ref) {\n      var headers = _ref[0],\n          token = _ref[1];\n      var authHeaders = {};\n\n      if (token) {\n        authHeaders['uppy-auth-token'] = token;\n      }\n\n      if (_this2.companionKeysParams) {\n        authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n          params: _this2.companionKeysParams\n        }));\n      }\n\n      return _extends({}, headers, authHeaders);\n    });\n  };\n\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    response = _RequestClient.prototype.onReceiveResponse.call(this, response);\n    var plugin = this.uppy.getPlugin(this.pluginId);\n    var oldAuthenticated = plugin.getPluginState().authenticated;\n    var authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated: authenticated\n    });\n    return response;\n  } // @todo(i.olarewaju) consider whether or not this method should be exposed\n  ;\n\n  _proto.setAuthToken = function setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  };\n\n  _proto.getAuthToken = function getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  };\n\n  _proto.authUrl = function authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n\n    if (this.preAuthToken) {\n      queries.uppyPreAuthToken = this.preAuthToken;\n    }\n\n    var strigifiedQueries = qsStringify(queries);\n    strigifiedQueries = strigifiedQueries ? \"?\" + strigifiedQueries : strigifiedQueries;\n    return this.hostname + \"/\" + this.id + \"/connect\" + strigifiedQueries;\n  };\n\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/\" + this.id + \"/get/\" + id;\n  };\n\n  _proto.fetchPreAuthToken = function fetchPreAuthToken() {\n    var _this3 = this;\n\n    if (!this.companionKeysParams) {\n      return Promise.resolve();\n    }\n\n    return this.post(this.id + \"/preauth/\", {\n      params: this.companionKeysParams\n    }).then(function (res) {\n      _this3.preAuthToken = res.token;\n    }).catch(function (err) {\n      _this3.uppy.log(\"[CompanionClient] unable to fetch preAuthToken \" + err, 'warning');\n    });\n  };\n\n  _proto.list = function list(directory) {\n    return this.get(this.id + \"/list/\" + (directory || ''));\n  };\n\n  _proto.logout = function logout() {\n    var _this4 = this;\n\n    return this.get(this.id + \"/logout\").then(function (response) {\n      return Promise.all([response, _this4.uppy.getPlugin(_this4.pluginId).storage.removeItem(_this4.tokenKey)]);\n    }).then(function (_ref2) {\n      var response = _ref2[0];\n      return response;\n    });\n  };\n\n  Provider.initPlugin = function initPlugin(plugin, opts, defaultOpts) {\n    plugin.type = 'acquirer';\n    plugin.files = [];\n\n    if (defaultOpts) {\n      plugin.opts = _extends({}, defaultOpts, opts);\n    }\n\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n\n    if (opts.companionAllowedHosts) {\n      var pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(plugin.id + \": the option \\\"companionAllowedHosts\\\" must be one of string, Array, RegExp\");\n      }\n\n      plugin.opts.companionAllowedHosts = pattern;\n    } else {\n      // does not start with https://\n      if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n        plugin.opts.companionAllowedHosts = \"https://\" + opts.companionUrl.replace(/^\\/\\//, '');\n      } else {\n        plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n      }\n    }\n\n    plugin.storage = plugin.opts.storage || tokenStorage;\n  };\n\n  return Provider;\n}(RequestClient);"],"mappings":"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"},"metadata":{},"sourceType":"script"}