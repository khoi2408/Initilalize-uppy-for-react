{"ast":null,"code":"'use strict';\n\nimport _regeneratorRuntime from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport RequestClient from './RequestClient.js';\nimport * as tokenStorage from './tokenStorage.js';\nvar getName = function getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\nvar Provider = /*#__PURE__*/function (_RequestClient) {\n  _inherits(Provider, _RequestClient);\n  var _super = _createSuper(Provider);\n  function Provider(uppy, opts) {\n    var _this;\n    _classCallCheck(this, Provider);\n    _this = _super.call(this, uppy, opts);\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    _this.tokenKey = \"companion-\".concat(_this.pluginId, \"-auth-token\");\n    _this.companionKeysParams = _this.opts.companionKeysParams;\n    _this.preAuthToken = null;\n    return _this;\n  }\n  _createClass(Provider, [{\n    key: \"headers\",\n    value: function () {\n      var _headers = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$Promise$all, _yield$Promise$all2, headers, token, authHeaders;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Promise.all([_get(_getPrototypeOf(Provider.prototype), \"headers\", this).call(this), this.getAuthToken()]);\n            case 2:\n              _yield$Promise$all = _context.sent;\n              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n              headers = _yield$Promise$all2[0];\n              token = _yield$Promise$all2[1];\n              authHeaders = {};\n              if (token) {\n                authHeaders['uppy-auth-token'] = token;\n              }\n              if (this.companionKeysParams) {\n                authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n                  params: this.companionKeysParams\n                }));\n              }\n              return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, headers), authHeaders));\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function headers() {\n        return _headers.apply(this, arguments);\n      }\n      return headers;\n    }()\n  }, {\n    key: \"onReceiveResponse\",\n    value: function onReceiveResponse(response) {\n      _get(_getPrototypeOf(Provider.prototype), \"onReceiveResponse\", this).call(this, response);\n      var plugin = this.uppy.getPlugin(this.pluginId);\n      var oldAuthenticated = plugin.getPluginState().authenticated;\n      var authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n      plugin.setPluginState({\n        authenticated: authenticated\n      });\n      return response;\n    }\n  }, {\n    key: \"setAuthToken\",\n    value: function setAuthToken(token) {\n      return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n    }\n  }, {\n    key: \"getAuthToken\",\n    value: function getAuthToken() {\n      return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n    }\n    /**\n     * Ensure we have a preauth token if necessary. Attempts to fetch one if we don't,\n     * or rejects if loading one fails.\n     */\n  }, {\n    key: \"ensurePreAuth\",\n    value: function () {\n      var _ensurePreAuth = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(this.companionKeysParams && !this.preAuthToken)) {\n                _context2.next = 5;\n                break;\n              }\n              _context2.next = 3;\n              return this.fetchPreAuthToken();\n            case 3:\n              if (this.preAuthToken) {\n                _context2.next = 5;\n                break;\n              }\n              throw new Error('Could not load authentication data required for third-party login. Please try again later.');\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function ensurePreAuth() {\n        return _ensurePreAuth.apply(this, arguments);\n      }\n      return ensurePreAuth;\n    }()\n  }, {\n    key: \"authUrl\",\n    value: function authUrl(queries) {\n      if (queries === void 0) {\n        queries = {};\n      }\n      var params = new URLSearchParams(queries);\n      if (this.preAuthToken) {\n        params.set('uppyPreAuthToken', this.preAuthToken);\n      }\n      return \"\".concat(this.hostname, \"/\").concat(this.id, \"/connect?\").concat(params);\n    }\n  }, {\n    key: \"fileUrl\",\n    value: function fileUrl(id) {\n      return \"\".concat(this.hostname, \"/\").concat(this.id, \"/get/\").concat(id);\n    }\n  }, {\n    key: \"fetchPreAuthToken\",\n    value: function () {\n      var _fetchPreAuthToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this.companionKeysParams) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 2:\n              _context3.prev = 2;\n              _context3.next = 5;\n              return this.post(\"\".concat(this.id, \"/preauth/\"), {\n                params: this.companionKeysParams\n              });\n            case 5:\n              res = _context3.sent;\n              this.preAuthToken = res.token;\n              _context3.next = 12;\n              break;\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](2);\n              this.uppy.log(\"[CompanionClient] unable to fetch preAuthToken \".concat(_context3.t0), 'warning');\n            case 12:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[2, 9]]);\n      }));\n      function fetchPreAuthToken() {\n        return _fetchPreAuthToken.apply(this, arguments);\n      }\n      return fetchPreAuthToken;\n    }()\n  }, {\n    key: \"list\",\n    value: function list(directory) {\n      return this.get(\"\".concat(this.id, \"/list/\").concat(directory || ''));\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this2 = this;\n      return this.get(\"\".concat(this.id, \"/logout\")).then(function (response) {\n        return Promise.all([response, _this2.uppy.getPlugin(_this2.pluginId).storage.removeItem(_this2.tokenKey)]);\n      }).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 1),\n          response = _ref2[0];\n        return response;\n      });\n    }\n  }], [{\n    key: \"initPlugin\",\n    value: function initPlugin(plugin, opts, defaultOpts) {\n      /* eslint-disable no-param-reassign */\n      plugin.type = 'acquirer';\n      plugin.files = [];\n      if (defaultOpts) {\n        plugin.opts = _objectSpread(_objectSpread({}, defaultOpts), opts);\n      }\n      if (opts.serverUrl || opts.serverPattern) {\n        throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n      }\n      if (opts.companionAllowedHosts) {\n        var pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n        if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n          throw new TypeError(\"\".concat(plugin.id, \": the option \\\"companionAllowedHosts\\\" must be one of string, Array, RegExp\"));\n        }\n        plugin.opts.companionAllowedHosts = pattern;\n      } else if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n        // does not start with https://\n        plugin.opts.companionAllowedHosts = \"https://\".concat(opts.companionUrl.replace(/^\\/\\//, ''));\n      } else {\n        plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n      }\n      plugin.storage = plugin.opts.storage || tokenStorage;\n      /* eslint-enable no-param-reassign */\n    }\n  }]);\n  return Provider;\n}(RequestClient);\nexport { Provider as default };","map":{"version":3,"names":["_regeneratorRuntime","_objectSpread","_slicedToArray","_asyncToGenerator","_classCallCheck","_createClass","_get","_getPrototypeOf","_inherits","_createSuper","RequestClient","tokenStorage","getName","id","split","map","s","charAt","toUpperCase","slice","join","Provider","_RequestClient","_super","uppy","opts","_this","call","provider","name","pluginId","tokenKey","concat","companionKeysParams","preAuthToken","key","value","_headers","mark","_callee","_yield$Promise$all","_yield$Promise$all2","headers","token","authHeaders","wrap","_callee$","_context","prev","next","Promise","all","prototype","getAuthToken","sent","btoa","JSON","stringify","params","abrupt","stop","apply","arguments","onReceiveResponse","response","plugin","getPlugin","oldAuthenticated","getPluginState","authenticated","status","setPluginState","setAuthToken","storage","setItem","getItem","_ensurePreAuth","_callee2","_callee2$","_context2","fetchPreAuthToken","Error","ensurePreAuth","authUrl","queries","URLSearchParams","set","hostname","fileUrl","_fetchPreAuthToken","_callee3","res","_callee3$","_context3","post","t0","log","list","directory","get","logout","_this2","then","removeItem","_ref","_ref2","initPlugin","defaultOpts","type","files","serverUrl","serverPattern","companionAllowedHosts","pattern","Array","isArray","RegExp","TypeError","test","companionUrl","replace","URL","origin","default"],"sources":["E:/integrate cloud/uppy/node_modules/@uppy/dropbox/node_modules/@uppy/companion-client/lib/Provider.js"],"sourcesContent":["'use strict';\n\nimport RequestClient from './RequestClient.js';\nimport * as tokenStorage from './tokenStorage.js';\n\nconst getName = id => {\n  return id.split('-').map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ');\n};\n\nexport default class Provider extends RequestClient {\n  constructor(uppy, opts) {\n    super(uppy, opts);\n    this.provider = opts.provider;\n    this.id = this.provider;\n    this.name = this.opts.name || getName(this.id);\n    this.pluginId = this.opts.pluginId;\n    this.tokenKey = `companion-${this.pluginId}-auth-token`;\n    this.companionKeysParams = this.opts.companionKeysParams;\n    this.preAuthToken = null;\n  }\n\n  async headers() {\n    const [headers, token] = await Promise.all([super.headers(), this.getAuthToken()]);\n    const authHeaders = {};\n\n    if (token) {\n      authHeaders['uppy-auth-token'] = token;\n    }\n\n    if (this.companionKeysParams) {\n      authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n        params: this.companionKeysParams\n      }));\n    }\n\n    return { ...headers,\n      ...authHeaders\n    };\n  }\n\n  onReceiveResponse(response) {\n    super.onReceiveResponse(response);\n    const plugin = this.uppy.getPlugin(this.pluginId);\n    const oldAuthenticated = plugin.getPluginState().authenticated;\n    const authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated\n    });\n    return response;\n  }\n\n  setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  }\n\n  getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  }\n  /**\n   * Ensure we have a preauth token if necessary. Attempts to fetch one if we don't,\n   * or rejects if loading one fails.\n   */\n\n\n  async ensurePreAuth() {\n    if (this.companionKeysParams && !this.preAuthToken) {\n      await this.fetchPreAuthToken();\n\n      if (!this.preAuthToken) {\n        throw new Error('Could not load authentication data required for third-party login. Please try again later.');\n      }\n    }\n  }\n\n  authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n\n    const params = new URLSearchParams(queries);\n\n    if (this.preAuthToken) {\n      params.set('uppyPreAuthToken', this.preAuthToken);\n    }\n\n    return `${this.hostname}/${this.id}/connect?${params}`;\n  }\n\n  fileUrl(id) {\n    return `${this.hostname}/${this.id}/get/${id}`;\n  }\n\n  async fetchPreAuthToken() {\n    if (!this.companionKeysParams) {\n      return;\n    }\n\n    try {\n      const res = await this.post(`${this.id}/preauth/`, {\n        params: this.companionKeysParams\n      });\n      this.preAuthToken = res.token;\n    } catch (err) {\n      this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${err}`, 'warning');\n    }\n  }\n\n  list(directory) {\n    return this.get(`${this.id}/list/${directory || ''}`);\n  }\n\n  logout() {\n    return this.get(`${this.id}/logout`).then(response => Promise.all([response, this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)])).then(_ref => {\n      let [response] = _ref;\n      return response;\n    });\n  }\n\n  static initPlugin(plugin, opts, defaultOpts) {\n    /* eslint-disable no-param-reassign */\n    plugin.type = 'acquirer';\n    plugin.files = [];\n\n    if (defaultOpts) {\n      plugin.opts = { ...defaultOpts,\n        ...opts\n      };\n    }\n\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n\n    if (opts.companionAllowedHosts) {\n      const pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(`${plugin.id}: the option \"companionAllowedHosts\" must be one of string, Array, RegExp`);\n      }\n\n      plugin.opts.companionAllowedHosts = pattern;\n    } else if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n      // does not start with https://\n      plugin.opts.companionAllowedHosts = `https://${opts.companionUrl.replace(/^\\/\\//, '')}`;\n    } else {\n      plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n    }\n\n    plugin.storage = plugin.opts.storage || tokenStorage;\n    /* eslint-enable no-param-reassign */\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}