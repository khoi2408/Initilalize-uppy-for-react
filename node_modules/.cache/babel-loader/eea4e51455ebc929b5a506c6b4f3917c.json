{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\n/* global window, localStorage */\nvar hasStorage = false;\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n        if (_key.indexOf(prefix) !== 0) continue;\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n      return results;\n    }\n  }]);\n  return WebStorageUrlStorage;\n}();","map":{"version":3,"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","hasStorage","window","localStorage","setItem","getItem","e","code","SECURITY_ERR","QUOTA_EXCEEDED_ERR","canStoreURLs","WebStorageUrlStorage","value","findAllUploads","results","_findEntries","Promise","resolve","findUploadsByFingerprint","fingerprint","concat","removeUpload","urlStorageKey","removeItem","addUpload","upload","id","Math","round","random","JSON","stringify","prefix","_key","indexOf","parse","push"],"sources":["E:/integrate cloud/uppy/node_modules/tus-js-client/lib.esm/browser/urlStorage.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* global window, localStorage */\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();"],"mappings":"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"},"metadata":{},"sourceType":"module"}