{"ast":null,"code":"import _classCallCheck from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/integrate cloud/uppy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nvar _Symbol$for, _Symbol$for2;\nfunction _classPrivateFieldLooseBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n  return receiver;\n}\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) {\n  return \"__private_\" + id++ + \"_\" + name;\n}\nimport ee from 'namespace-emitter';\nvar _queued = /*#__PURE__*/_classPrivateFieldLooseKey(\"queued\");\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\nvar _isOpen = /*#__PURE__*/_classPrivateFieldLooseKey(\"isOpen\");\nvar _socket = /*#__PURE__*/_classPrivateFieldLooseKey(\"socket\");\nvar _handleMessage = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleMessage\");\n_Symbol$for = Symbol.for('uppy test: getSocket');\n_Symbol$for2 = Symbol.for('uppy test: getQueued');\nvar UppySocket = /*#__PURE__*/function (_Symbol$for3, _Symbol$for4) {\n  function UppySocket(opts) {\n    var _this = this;\n    _classCallCheck(this, UppySocket);\n    Object.defineProperty(this, _queued, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: ee()\n    });\n    Object.defineProperty(this, _isOpen, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _socket, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleMessage, {\n      writable: true,\n      value: function value(e) {\n        try {\n          var message = JSON.parse(e.data);\n          _this.emit(message.action, message.payload);\n        } catch (err) {\n          // TODO: use a more robust error handler.\n          console.log(err); // eslint-disable-line no-console\n        }\n      }\n    });\n\n    this.opts = opts;\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n  _createClass(UppySocket, [{\n    key: \"isOpen\",\n    get: function get() {\n      return _classPrivateFieldLooseBase(this, _isOpen)[_isOpen];\n    }\n  }, {\n    key: _Symbol$for3,\n    value: function value() {\n      return _classPrivateFieldLooseBase(this, _socket)[_socket];\n    }\n  }, {\n    key: _Symbol$for4,\n    value: function value() {\n      return _classPrivateFieldLooseBase(this, _queued)[_queued];\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n      _classPrivateFieldLooseBase(this, _socket)[_socket] = new WebSocket(this.opts.target);\n      _classPrivateFieldLooseBase(this, _socket)[_socket].onopen = function () {\n        _classPrivateFieldLooseBase(_this2, _isOpen)[_isOpen] = true;\n        while (_classPrivateFieldLooseBase(_this2, _queued)[_queued].length > 0 && _classPrivateFieldLooseBase(_this2, _isOpen)[_isOpen]) {\n          var first = _classPrivateFieldLooseBase(_this2, _queued)[_queued].shift();\n          _this2.send(first.action, first.payload);\n        }\n      };\n      _classPrivateFieldLooseBase(this, _socket)[_socket].onclose = function () {\n        _classPrivateFieldLooseBase(_this2, _isOpen)[_isOpen] = false;\n      };\n      _classPrivateFieldLooseBase(this, _socket)[_socket].onmessage = _classPrivateFieldLooseBase(this, _handleMessage)[_handleMessage];\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _classPrivateFieldLoo;\n      (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _socket)[_socket]) == null ? void 0 : _classPrivateFieldLoo.close();\n    }\n  }, {\n    key: \"send\",\n    value: function send(action, payload) {\n      // attach uuid\n      if (!_classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n        _classPrivateFieldLooseBase(this, _queued)[_queued].push({\n          action: action,\n          payload: payload\n        });\n        return;\n      }\n      _classPrivateFieldLooseBase(this, _socket)[_socket].send(JSON.stringify({\n        action: action,\n        payload: payload\n      }));\n    }\n  }, {\n    key: \"on\",\n    value: function on(action, handler) {\n      _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(action, handler);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(action, payload) {\n      _classPrivateFieldLooseBase(this, _emitter)[_emitter].emit(action, payload);\n    }\n  }, {\n    key: \"once\",\n    value: function once(action, handler) {\n      _classPrivateFieldLooseBase(this, _emitter)[_emitter].once(action, handler);\n    }\n  }]);\n  return UppySocket;\n}(_Symbol$for, _Symbol$for2);\nexport { UppySocket as default };","map":{"version":3,"names":["_Symbol$for","_Symbol$for2","_classPrivateFieldLooseBase","receiver","privateKey","Object","prototype","hasOwnProperty","call","TypeError","id","_classPrivateFieldLooseKey","name","ee","_queued","_emitter","_isOpen","_socket","_handleMessage","Symbol","for","UppySocket","_Symbol$for3","_Symbol$for4","opts","_this","_classCallCheck","defineProperty","writable","value","e","message","JSON","parse","data","emit","action","payload","err","console","log","autoOpen","open","_createClass","key","get","_this2","WebSocket","target","onopen","length","first","shift","send","onclose","onmessage","close","_classPrivateFieldLoo","push","stringify","on","handler","once","default"],"sources":["E:/integrate cloud/uppy/node_modules/@uppy/dropbox/node_modules/@uppy/companion-client/lib/Socket.js"],"sourcesContent":["let _Symbol$for, _Symbol$for2;\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport ee from 'namespace-emitter';\n\nvar _queued = /*#__PURE__*/_classPrivateFieldLooseKey(\"queued\");\n\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\n\nvar _isOpen = /*#__PURE__*/_classPrivateFieldLooseKey(\"isOpen\");\n\nvar _socket = /*#__PURE__*/_classPrivateFieldLooseKey(\"socket\");\n\nvar _handleMessage = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleMessage\");\n\n_Symbol$for = Symbol.for('uppy test: getSocket');\n_Symbol$for2 = Symbol.for('uppy test: getQueued');\nexport default class UppySocket {\n  constructor(opts) {\n    Object.defineProperty(this, _queued, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: ee()\n    });\n    Object.defineProperty(this, _isOpen, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _socket, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleMessage, {\n      writable: true,\n      value: e => {\n        try {\n          const message = JSON.parse(e.data);\n          this.emit(message.action, message.payload);\n        } catch (err) {\n          // TODO: use a more robust error handler.\n          console.log(err); // eslint-disable-line no-console\n        }\n      }\n    });\n    this.opts = opts;\n\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n\n  get isOpen() {\n    return _classPrivateFieldLooseBase(this, _isOpen)[_isOpen];\n  }\n\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _socket)[_socket];\n  }\n\n  [_Symbol$for2]() {\n    return _classPrivateFieldLooseBase(this, _queued)[_queued];\n  }\n\n  open() {\n    _classPrivateFieldLooseBase(this, _socket)[_socket] = new WebSocket(this.opts.target);\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onopen = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = true;\n\n      while (_classPrivateFieldLooseBase(this, _queued)[_queued].length > 0 && _classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n        const first = _classPrivateFieldLooseBase(this, _queued)[_queued].shift();\n\n        this.send(first.action, first.payload);\n      }\n    };\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onclose = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = false;\n    };\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onmessage = _classPrivateFieldLooseBase(this, _handleMessage)[_handleMessage];\n  }\n\n  close() {\n    var _classPrivateFieldLoo;\n\n    (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _socket)[_socket]) == null ? void 0 : _classPrivateFieldLoo.close();\n  }\n\n  send(action, payload) {\n    // attach uuid\n    if (!_classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n      _classPrivateFieldLooseBase(this, _queued)[_queued].push({\n        action,\n        payload\n      });\n\n      return;\n    }\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].send(JSON.stringify({\n      action,\n      payload\n    }));\n  }\n\n  on(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(action, handler);\n  }\n\n  emit(action, payload) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].emit(action, payload);\n  }\n\n  once(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].once(action, handler);\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}