{"version":3,"sources":["StatusBar.js"],"names":["React","require","PropTypes","StatusBarPlugin","uppyPropType","uppy","getHTMLProps","h","createElement","StatusBar","props","validProps","componentDidMount","installPlugin","componentDidUpdate","prevProps","uninstallPlugin","componentWillUnmount","options","id","target","container","use","plugin","getPlugin","removePlugin","render","ref","Component","propTypes","hideAfterFinish","bool","showProgressDetails","defaultProps","module","exports"],"mappings":";;;;;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAMC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAzB;;AACA,IAAME,eAAe,GAAGF,OAAO,CAAC,kBAAD,CAA/B;;AACA,IAAMG,YAAY,GAAGH,OAAO,CAAC,aAAD,CAAP,CAAuBI,IAA5C;;AACA,IAAMC,YAAY,GAAGL,OAAO,CAAC,gBAAD,CAA5B;;AAEA,IAAMM,CAAC,GAAGP,KAAK,CAACQ,aAAhB;AAEA;AACA;AACA;AACA;;IAEMC,S;;;AACJ,qBAAaC,KAAb,EAAoB;AAAA;;AAClB,wCAAMA,KAAN;AACA,UAAKC,UAAL,GAAkBL,YAAY,CAACI,KAAD,CAA9B;AAFkB;AAGnB;;;;SAEDE,iB,GAAA,6BAAqB;AACnB,SAAKC,aAAL;AACD,G;;SAEDC,kB,GAAA,4BAAoBC,SAApB,EAA+B;AAC7B,QAAIA,SAAS,CAACV,IAAV,KAAmB,KAAKK,KAAL,CAAWL,IAAlC,EAAwC;AACtC,WAAKW,eAAL,CAAqBD,SAArB;AACA,WAAKF,aAAL;AACD;AACF,G;;SAEDI,oB,GAAA,gCAAwB;AACtB,SAAKD,eAAL;AACD,G;;SAEDH,a,GAAA,yBAAiB;AACf,QAAQR,IAAR,GAAiB,KAAKK,KAAtB,CAAQL,IAAR;;AACA,QAAMa,OAAO;AACXC,MAAAA,EAAE,EAAE;AADO,OAER,KAAKT,KAFG;AAGXU,MAAAA,MAAM,EAAE,KAAKC;AAHF,MAAb;;AAKA,WAAOH,OAAO,CAACb,IAAf;AAEAA,IAAAA,IAAI,CAACiB,GAAL,CAASnB,eAAT,EAA0Be,OAA1B;AAEA,SAAKK,MAAL,GAAclB,IAAI,CAACmB,SAAL,CAAeN,OAAO,CAACC,EAAvB,CAAd;AACD,G;;SAEDH,e,GAAA,yBAAiBN,KAAjB,EAAqC;AAAA,QAApBA,KAAoB;AAApBA,MAAAA,KAAoB,GAAZ,KAAKA,KAAO;AAAA;;AACnC,iBAAiBA,KAAjB;AAAA,QAAQL,IAAR,UAAQA,IAAR;AAEAA,IAAAA,IAAI,CAACoB,YAAL,CAAkB,KAAKF,MAAvB;AACD,G;;SAEDG,M,GAAA,kBAAU;AAAA;;AACR,WAAOnB,CAAC,CAAC,KAAD;AACNoB,MAAAA,GAAG,EAAE,aAACN,SAAD,EAAe;AAClB,QAAA,MAAI,CAACA,SAAL,GAAiBA,SAAjB;AACD;AAHK,OAIH,KAAKV,UAJF,EAAR;AAMD,G;;;EAhDqBX,KAAK,CAAC4B,S;;AAmD9BnB,SAAS,CAACoB,SAAV,GAAsB;AACpBxB,EAAAA,IAAI,EAAED,YADc;AAEpB0B,EAAAA,eAAe,EAAE5B,SAAS,CAAC6B,IAFP;AAGpBC,EAAAA,mBAAmB,EAAE9B,SAAS,CAAC6B;AAHX,CAAtB;AAKAtB,SAAS,CAACwB,YAAV,GAAyB,EAAzB;AAGAC,MAAM,CAACC,OAAP,GAAiB1B,SAAjB","sourcesContent":["const React = require('react')\nconst PropTypes = require('prop-types')\nconst StatusBarPlugin = require('@uppy/status-bar')\nconst uppyPropType = require('./propTypes').uppy\nconst getHTMLProps = require('./getHTMLProps')\n\nconst h = React.createElement\n\n/**\n * React component that renders a status bar containing upload progress and speed,\n * processing progress and pause/resume/cancel controls.\n */\n\nclass StatusBar extends React.Component {\n  constructor (props) {\n    super(props)\n    this.validProps = getHTMLProps(props)\n  }\n\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.uppy !== this.props.uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const { uppy } = this.props\n    const options = {\n      id: 'react:StatusBar',\n      ...this.props,\n      target: this.container,\n    }\n    delete options.uppy\n\n    uppy.use(StatusBarPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    return h('div', {\n      ref: (container) => {\n        this.container = container\n      },\n      ...this.validProps,\n    })\n  }\n}\n\nStatusBar.propTypes = {\n  uppy: uppyPropType,\n  hideAfterFinish: PropTypes.bool,\n  showProgressDetails: PropTypes.bool,\n}\nStatusBar.defaultProps = {\n}\n\nmodule.exports = StatusBar\n"]}